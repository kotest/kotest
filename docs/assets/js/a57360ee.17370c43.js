"use strict";(self.webpackChunkkotestdocs=self.webpackChunkkotestdocs||[]).push([[64194],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=o,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||i;return t?a.createElement(f,r(r({ref:n},p),{},{components:t})):a.createElement(f,r({ref:n},p))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var c=2;c<i;c++)r[c]=t[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},16856:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var a=t(87462),o=(t(67294),t(3905));const i={id:"annotations",title:"Conditional tests with annotations",slug:"spec-annotations-conditional-evaluation.html",sidebar_label:"Spec Annotations"},r=void 0,l={unversionedId:"framework/conditional/annotations",id:"framework/conditional/annotations",title:"Conditional tests with annotations",description:"If we wish to completely disable a Spec and all tests included in the spec, we can do this using annotations.",source:"@site/docs/framework/conditional/annotations.md",sourceDirName:"framework/conditional",slug:"/framework/conditional/spec-annotations-conditional-evaluation.html",permalink:"/docs/next/framework/conditional/spec-annotations-conditional-evaluation.html",draft:!1,editUrl:"https://github.com/kotest/kotest/blob/master/documentation/docs/framework/conditional/annotations.md",tags:[],version:"current",frontMatter:{id:"annotations",title:"Conditional tests with annotations",slug:"spec-annotations-conditional-evaluation.html",sidebar_label:"Spec Annotations"},sidebar:"framework",previous:{title:"X Methods",permalink:"/docs/next/framework/conditional/conditional-tests-with-x-methods.html"},next:{title:"Exceptions",permalink:"/docs/next/framework/conditional/conditional-exceptions.html"}},s={},c=[{value:"@Ignored",id:"ignored",level:2},{value:"@EnabledIf",id:"enabledif",level:2},{value:"@DisabledIf",id:"disabledif",level:2}],p={toc:c};function d(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"If we wish to completely disable a Spec and all tests included in the spec, we can do this using annotations."),(0,o.kt)("p",null,"An advantage to this approach, instead of disabling each test one by one, is that the spec will not be instantiated.\nIf a spec has expensive resource setup/teardown, then that time can be avoided by this approach."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"[JVM Only]"),(0,o.kt)("p",{parentName:"admonition"},"These annotations are only available for specs executing on the JVM.")),(0,o.kt)("h2",{id:"ignored"},"@Ignored"),(0,o.kt)("p",null,"If we wish to simply disable a spec completely, then we can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"@Ignored")," annotation."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'@Ignored\nclass IgnoredSpec : FunSpec() {\n  init {\n    error("boom") // spec will not be created, so this error will not happen\n  }\n}\n')),(0,o.kt)("h2",{id:"enabledif"},"@EnabledIf"),(0,o.kt)("p",null,"If we want to enable a spec dependent on the execution of a function, then we can use ",(0,o.kt)("inlineCode",{parentName:"p"},"@EnabledIf"),"."),(0,o.kt)("p",null,"This annotation accepts a class that implements ",(0,o.kt)("inlineCode",{parentName:"p"},"Condition"),", and that class is instantiated and invoked\nto determine if a spec is enabled. Note that implementations must have a zero args constructor."),(0,o.kt)("p",null,"For example, we may wish to only execute a spec when running on a Linux machine.\nWe will use the system property ",(0,o.kt)("inlineCode",{parentName:"p"},"os.name")," to determine if we are running on Linux."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'class LinuxOnlyCondition : Condition {\n  override fun evaluate(kclass: KClass<out Spec>): Boolean {\n    val os = System.getProperty("os.name") ?: return false\n    return os.lowercase().contains("linux")\n  }\n}\n')),(0,o.kt)("p",null,"Then we can apply this condition to one or more specs:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},"@EnabledIf(LinuxOnlyCondition::class)\nclass MyLinuxTests : FunSpec() {\n  // tests here\n}\n\n@EnabledIf(LinuxOnlyCondition::class)\nclass MyWindowsTests : DescribeSpec() {\n  // tests here\n}\n")),(0,o.kt)("h2",{id:"disabledif"},"@DisabledIf"),(0,o.kt)("p",null,"The opposite of ",(0,o.kt)("inlineCode",{parentName:"p"},"@EnabledIf"),". Any spec annotated with ",(0,o.kt)("inlineCode",{parentName:"p"},"@DisabledIf")," will be disabled if the condition\napplied to that annotation evaluates to ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,o.kt)("p",null,"For example, we may wish to disable a particular spec when running on a CI server.\nWe will use the presence of an env variable ",(0,o.kt)("inlineCode",{parentName:"p"},"CI")," to determine if we are running on a CI server."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'class CIServerCondition : Condition {\n  override fun evaluate(kclass: KClass<out Spec>): Boolean = System.getenv("CI") != null\n}\n')),(0,o.kt)("p",null,"Then we can apply this condition to one or more specs:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},"@DisabledIf(CIServerCondition::class)\nclass SkipOnCiSpec : FunSpec() {\n  // tests here\n}\n")))}d.isMDXComponent=!0}}]);