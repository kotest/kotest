"use strict";(self.webpackChunkkotestdocs=self.webpackChunkkotestdocs||[]).push([[90273],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,k=d["".concat(c,".").concat(m)]||d[m]||p[m]||a;return n?o.createElement(k,i(i({ref:t},u),{},{components:n})):o.createElement(k,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},17856:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=n(87462),r=(n(67294),n(3905));const a={id:"decoroutinator",title:"Decoroutinator",sidebar_label:"Decoroutinator",slug:"decoroutinator.html"},i=void 0,s={unversionedId:"extensions/decoroutinator",id:"extensions/decoroutinator",title:"Decoroutinator",description:"The Kotest Decoroutinator extension integrates Stacktrace Decoroutinator with Kotest. Decoroutinator improves stack traces in Kotlin coroutines by removing the internal coroutine implementation details, making stack traces cleaner and easier to understand.",source:"@site/docs/extensions/decoroutinator.md",sourceDirName:"extensions",slug:"/extensions/decoroutinator.html",permalink:"/docs/next/extensions/decoroutinator.html",draft:!1,editUrl:"https://github.com/kotest/kotest/blob/master/documentation/docs/extensions/decoroutinator.md",tags:[],version:"current",frontMatter:{id:"decoroutinator",title:"Decoroutinator",sidebar_label:"Decoroutinator",slug:"decoroutinator.html"},sidebar:"extensions",previous:{title:"Test Clock",permalink:"/docs/next/extensions/test_clock.html"},next:{title:"Current Instant Listeners",permalink:"/docs/next/extensions/instant.html"}},c={},l=[{value:"Getting Started",id:"getting-started",level:3},{value:"How It Works",id:"how-it-works",level:3},{value:"Example",id:"example",level:3}],u={toc:l};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The Kotest Decoroutinator extension integrates ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Anamorphosee/stacktrace-decoroutinator"},"Stacktrace Decoroutinator")," with Kotest. Decoroutinator improves stack traces in Kotlin coroutines by removing the internal coroutine implementation details, making stack traces cleaner and easier to understand."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"To use this extension add the ",(0,r.kt)("inlineCode",{parentName:"p"},"io.kotest:kotest-extensions-decoroutinator")," module to your test compile path.")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://central.sonatype.com/artifact/io.kotest/kotest-extensions-decoroutinator"},(0,r.kt)("img",{src:"https://img.shields.io/maven-central/v/io.kotest/kotest-extensions-decoroutinator.svg?label=latest%20release"})),"\n",(0,r.kt)("a",{parentName:"p",href:"https://central.sonatype.com/repository/maven-snapshots/io/kotest/kotest-extensions-decoroutinator/maven-metadata.xml"},(0,r.kt)("img",{src:"https://img.shields.io/maven-metadata/v?metadataUrl=https%3A%2F%2Fcentral.sonatype.com%2Frepository%2Fmaven-snapshots%2Fio%2Fkotest%2Fkotest-extensions-decoroutinator%2Fmaven-metadata.xml"}))),(0,r.kt)("h3",{id:"getting-started"},"Getting Started"),(0,r.kt)("p",null,"Register the ",(0,r.kt)("inlineCode",{parentName:"p"},"DecoroutinatorExtension")," in your test class:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'class MyTest : FunSpec({\n   extension(DecoroutinatorExtension())\n\n   test("with clean stack traces") {\n      // Your test code with coroutines\n   }\n})\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"DecoroutinatorExtension")," can also be registered at the ",(0,r.kt)("a",{parentName:"p",href:"../framework/project-config.html"},"project level")," for all tests:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"class ProjectConfig : AbstractProjectConfig() {\n   override fun extensions() = listOf(DecoroutinatorExtension())\n}\n")),(0,r.kt)("h3",{id:"how-it-works"},"How It Works"),(0,r.kt)("p",null,"When a test fails due to an exception in a coroutine, the stack trace typically contains many internal coroutine implementation details that make it difficult to understand the actual cause of the failure. The Decoroutinator extension automatically installs the Decoroutinator JVM API, which:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Removes internal coroutine implementation details from stack traces"),(0,r.kt)("li",{parentName:"ol"},"Makes the stack traces more readable and focused on your code"),(0,r.kt)("li",{parentName:"ol"},"Helps you quickly identify the source of errors in coroutine-based tests")),(0,r.kt)("h3",{id:"example"},"Example"),(0,r.kt)("p",null,"Without Decoroutinator, a stack trace might look like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"java.lang.IllegalStateException: Test exception\n    at com.example.MyTest$1$1.invokeSuspend(MyTest.kt:15)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n    at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:570)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:677)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:664)\n    ... many more internal details\n")),(0,r.kt)("p",null,"With Decoroutinator, the same stack trace becomes:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"java.lang.IllegalStateException: Test exception\n    at com.example.MyTest$1$1.invokeSuspend(MyTest.kt:15)\n    ... coroutine implementation details removed for clarity\n")),(0,r.kt)("p",null,"This makes it much easier to identify and fix issues in your coroutine-based tests."))}p.isMDXComponent=!0}}]);